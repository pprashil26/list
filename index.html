<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Collections v1 Minimal</title>
<style>
:root{
  --mint:#dff5ec;
  --brown:#3e2f25;
  --line:#c8e8dc;
}

/* Reset */
*{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;color:var(--brown);}
body{display:flex;flex-direction:column;height:100vh;background:var(--mint);overflow:hidden;}

/* HEADER */
.header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:6px 8px;
  border-bottom:1px solid var(--line);
}

#listTitle{
  flex:1;
  min-width:0;
  border:none;
  outline:none;
  font-weight:500;
  font-size:16px;
}

button.icon{
  background:none;
  border:none;
  cursor:pointer;
  font-size:16px;
  margin-left:4px;
}

/* TEXTAREA */
#editor{
  flex:1;
  border:none;
  outline:none;
  resize:none;
  padding:8px;
  line-height:1.4;
  font-family:monospace;
  background:repeating-linear-gradient(to bottom, transparent, transparent 22px, var(--line) 23px);
  overflow-y:auto;
}

/* LIST ITEM COMPLETION */
.completed{
  text-decoration: line-through;
  color:rgba(62,47,37,0.6);
}

/* MOBILE RESPONSIVENESS */
@media(max-width:768px){
  #listTitle{ font-size:14px; }
  button.icon{ font-size:14px; }
  #editor{ padding:6px; line-height:1.3; }
}
</style>
</head>
<body>

<div class="header">
  <input id="listTitle" value="New List">
  <div>
    <button class="icon" onclick="newItem()">‚ûï</button>
    <button class="icon" onclick="deleteList()">üóëÔ∏è</button>
  </div>
</div>

<textarea id="editor"></textarea>

<script>
// Data storage
let list = {title:"New List", content:[]}; // content array of {text, completed}

// Save/load
function save(){ localStorage.setItem("collection_v1", JSON.stringify(list)); }
function load(){ const data=localStorage.getItem("collection_v1"); if(data) list=JSON.parse(data); renderEditor(); }

// Render editor
function renderEditor(){
  const editor=document.getElementById("editor");
  editor.value=list.content.map(item=> (item.completed?"[x] ":"- ")+item.text ).join("\n");
}

// Add new item
function newItem(){
  list.content.push({text:"", completed:false});
  renderEditor();
  save();
  // focus last line
  const editor=document.getElementById("editor");
  editor.selectionStart=editor.selectionEnd=editor.value.length;
  editor.focus();
}

// Delete list
function deleteList(){
  if(confirm("Delete this list?")){ list={title:"New List", content:[]}; renderEditor(); save(); }
}

// Title edit
document.getElementById("listTitle").addEventListener("input",function(){ list.title=this.value||"New List"; save(); });

// Editor input + completion toggle
const editor=document.getElementById("editor");
editor.addEventListener("input",function(){
  const lines=this.value.split("\n");
  list.content=lines.map(line=>{
    let completed=false,text=line;
    if(line.startsWith("[x] ")){ completed=true; text=line.substring(4); }
    else if(line.startsWith("- ")) text=line.substring(2);
    return {text, completed};
  });
  save();
});

editor.addEventListener("keydown",function(e){
  if(e.key==="Enter"){
    // Auto bullet / number
    const start=this.selectionStart;
    const text=this.value.substring(0,start);
    const lines=text.split("\n");
    const last=lines[lines.length-1];
    let prefix="- ";
    if(/^\d+\./.test(last)) prefix=(parseInt(last)+1)+". ";
    setTimeout(()=>{
      const pos=this.selectionStart;
      this.value=this.value.substring(0,pos)+prefix+this.value.substring(pos);
      this.selectionStart=this.selectionEnd=pos+prefix.length;
    },0);
  }
});

// Initialize
load();
renderEditor();
</script>

</body>
</html>